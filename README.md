# 🌟 スタンプコレクション & うがい習慣アプリ

楽しくスタンプを集めて、素敵なお話しをご褒美としてもらえるアプリケーションです！
また、Flask + React で作られた子供のうがい習慣を促進するアプリも含まれています。

## 📱 アプリの種類

### スタンプコレクション系
#### 1. フリーキャンバス版 (`stamp_web_app.py`)
自由にスタンプを配置できる白いキャンバスでスタンプコレクションを楽しめます。

#### 2. カレンダー版 (`calendar_stamp_app.py`) 
日付ごとにスタンプを配置し、毎日の記録として楽しめるカレンダー形式のアプリです。

#### 3. キャラクター育成版 (`character_evolution_app.py`) ⭐NEW!
スタンプ数に応じてキャラクターが成長するカレンダー形式のアプリです。🥚→🐣→🐔→🦅→🔥→🐉と進化します！

#### 4. デスクトップ版 (`stamp_collection_app.py`)
Tkinterを使用したデスクトップアプリ版（要：GUI環境）

### うがい習慣アプリ
Flask + React で作られた、子供のうがい習慣を促進するアプリです。3つのゲームから1つがランダムに選ばれて遊べます。

## ✨ 機能

### スタンプコレクション共通機能
- 🎯 **無制限スタンプ配置**: いくつでもスタンプを置けます
- 📖 **お話しのご褒美**: スタンプを集めるとストーリーがもらえます
- 💾 **進捗保存**: スタンプの配置を保存・読み込みできます
- 🎨 **カラフルなスタンプ**: 15種類の絵文字と10色のカラーバリエーション

### うがい習慣アプリ機能
- **うがい記録**: 毎日のうがいを記録してスタンプを集める
- **ゲーム抽選**: 3つのゲームから1つがランダムに選ばれる
  - 星キャッチゲーム: 落ちてくる星をクリックしてキャッチ
  - メモリーマッチングゲーム: 同じ色のカードをマッチさせる
  - お絵かきゲーム: 自由にお絵かきする
- **進捗管理**: 連続日数や合計日数を記録

## 🚀 セットアップ

### 必要な環境
- Python 3.7以上
- Flask（Web版のみ）
- Node.js 14+ (うがい習慣アプリ用)
- npm (Node.js に含まれる)

### インストール
```bash
pip install flask flask-cors
```

## 📖 使用方法

### スタンプコレクション系アプリ

#### Web版（推奨）
```bash
# フリーキャンバス版
python stamp_web_app.py

# カレンダー版
python calendar_stamp_app.py
```

ブラウザで `http://localhost:5000` にアクセスしてください。

#### デスクトップ版
```bash
python stamp_collection_app.py
```

### うがい習慣アプリ

#### 簡単起動
```bash
python run.py
```

#### 手動セットアップ

1. **Python 依存関係のインストール**
```bash
pip install flask flask-cors
```

2. **フロントエンド依存関係のインストール**
```bash
cd frontend
npm install
```

3. **フロントエンドのビルド**
```bash
npm run build
cd ..
```

4. **アプリケーションの起動**
```bash
python app.py
```

## 🎮 使い方

### スタンプコレクション系

#### フリーキャンバス版
1. 白いキャンバスをクリックしてスタンプを配置
2. 「お話しを聞く」ボタンでストーリーを読む
3. 「クリア」ボタンでスタンプをリセット
4. 「保存」「読み込み」ボタンで進捗管理

#### カレンダー版
1. カレンダーの日付をクリックしてスタンプを配置
2. 緑色にハイライトされた日付が選択状態
3. 「選んだ日のお話し」ボタンでその日のストーリーを読む
4. 「選んだ日をクリア」ボタンでその日のスタンプを削除
5. 矢印ボタンで月を移動
6. 月間統計で進捗を確認

### うがい習慣アプリ
1. ブラウザで `http://localhost:5000` にアクセス
2. 「うがいしました」ボタンを押してスタンプをもらう
3. 「ゲームで遊ぶ」ボタンでゲームを開始
4. 3つのゲームから1つがランダムに選ばれる
5. ゲームをクリアしてスコアを獲得

## 🎨 スタンプの種類

15種類の可愛いスタンプが用意されています：
- ⭐ 星
- 🌸 桜
- 💖 ハート
- 🎈 風船
- 🌈 虹
- 🎀 リボン
- 🦋 蝶
- 🌺 花
- ✨ キラキラ
- 🎁 プレゼント
- 🌟 星2
- 🌻 ひまわり
- 🍀 クローバー
- 🎊 紙吹雪
- 🎉 お祝い

## 📚 お話しのご褒美

スタンプを集めると、心温まるストーリーをご褒美として読むことができます。物語は15種類用意されており、以下のような内容が含まれています：

- 心優しい少女と森の動物たちの物語
- 魔法使いと不思議な種の話
- 宇宙人、人魚、天使の冒険
- 図書館と時計屋の不思議な物語
- 日常の小さな幸せを描いた話

### 特別ボーナス
- **フリーキャンバス版**: 10個以上のスタンプで特別メッセージ
- **カレンダー版**: 1日に5個以上のスタンプで特別メッセージ

## 💾 データの保存

### 保存ファイル
- フリーキャンバス版: `stamp_progress.json`
- カレンダー版: `calendar_stamp_progress.json`
- うがい習慣アプリ: `gargle_progress.json`

### 保存内容
- スタンプの位置、色、絵文字
- 配置した日時
- スタンプの総数

## 📁 ファイル構成

```
├── README.md                    # このファイル
├── stamp_web_app.py            # フリーキャンバス版（Web）
├── calendar_stamp_app.py       # カレンダー版（Web）
├── stamp_collection_app.py     # デスクトップ版（Tkinter）
├── app.py                      # うがい習慣アプリ（Flask バックエンド）
├── run.py                      # 簡単起動スクリプト
├── requirements.txt            # Python 依存関係
├── templates/
│   ├── index.html              # フリーキャンバス版HTML
│   └── calendar.html           # カレンダー版HTML
├── stamp_progress.json         # フリーキャンバス版の保存データ
├── calendar_stamp_progress.json # カレンダー版の保存データ
├── gargle_progress.json        # うがい習慣アプリの進捗データ
└── frontend/
    ├── package.json            # Node.js 依存関係
    ├── public/
    │   └── index.html          # HTML テンプレート
    └── src/
        ├── App.js              # メインアプリコンポーネント
        ├── App.css             # スタイル
        ├── index.js            # エントリーポイント
        └── components/         # React コンポーネント
            ├── MainScreen.js
            ├── GameIntro.js
            ├── CatchingGame.js
            ├── MemoryGame.js
            ├── DrawingGame.js
            └── GameResult.js
```

## 🔧 API エンドポイント

### スタンプコレクション系
- `GET /api/get_stamps` - スタンプデータの取得
- `POST /api/place_stamp` - スタンプの配置
- `POST /api/clear_stamps` - スタンプのクリア
- `GET /api/get_story` - ストーリーの取得
- `POST /api/save_progress` - 進捗の保存
- `POST /api/load_progress` - 進捗の読み込み

### カレンダー版追加エンドポイント
- `GET /api/get_calendar/<year>/<month>` - カレンダーデータの取得
- `GET /api/get_day_stamps/<date>` - 指定日のスタンプ取得
- `POST /api/clear_day_stamps/<date>` - 指定日のスタンプクリア
- `GET /api/get_story/<date>` - 指定日のストーリー取得
- `GET /api/get_monthly_stats/<year>/<month>` - 月間統計取得

### うがい習慣アプリ
- `GET /api/progress` - 進捗データの取得
- `POST /api/stamp` - スタンプの付与
- `POST /api/game/select` - ゲームの抽選
- `POST /api/game/result` - ゲーム結果の保存

## 🛠️ 開発モード

うがい習慣アプリの開発モードでフロントエンドを起動:
```bash
cd frontend
npm start
```

バックエンドを起動:
```bash
python app.py
```

フロントエンドは `http://localhost:3000`、バックエンドは `http://localhost:5000` で動作します。

## 🎯 技術仕様

### 使用技術
- **バックエンド**: Python, Flask
- **フロントエンド**: HTML5, CSS3, JavaScript, React
- **デスクトップ版**: Python, Tkinter
- **データ保存**: JSON形式

## 🔧 トラブルシューティング

### GUI環境がない場合
デスクトップ版で `TclError: no display name` エラーが発生する場合は、Web版を使用してください。

### ポート5000が使用中の場合
アプリ起動時に別のポート番号を指定してください：
```python
app.run(host='0.0.0.0', port=8080, debug=True)
```

### データが消える場合
定期的に「保存」ボタンを押してデータを保存してください。

## 🌈 カスタマイズ

### ストーリーの追加
各Pythonファイルの `stories` リストに新しいストーリーを追加できます。

### スタンプの種類を変更
`stamp_types` リストの絵文字を変更することで、異なるスタンプを使用できます。

### 色の変更
`colors` リストを編集することで、スタンプの色を変更できます。

## 🎉 楽しみ方のヒント

1. **毎日のルーチン**: カレンダー版で毎日スタンプを押して習慣化
2. **目標設定**: 月間で決めた数のスタンプを目指す
3. **ストーリーコレクション**: 全てのお話しを読破する
4. **アート作品**: フリーキャンバス版でスタンプアートを作成
5. **家族で楽しむ**: 複数人でスタンプを共有して楽しむ

## 📝 ライセンス

このプロジェクトは教育目的で作成されています。自由に使用、改変していただけます。

---

**楽しいスタンプコレクションライフをお過ごしください！** 🌟